<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <title>Electrify</title>

    <link rel="stylesheet" href="./assets/lib/fontawesome/css/fontawesome.css" />

    <link rel="stylesheet" href="./assets/css/style.css" />

</head>

<body>

    <div class="page" id="outdoor">
        <div class="page-left">

            <div class="page-left-content" id="outdoor-lights-left">
                <div class="box" id="outdoor-light-group-one">
                    <div class="box-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="box-content">
                        First group lights
                    </div>
                </div>
                <div class="box" id="outdoor-light-group-two">
                    <div class="box-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="box-content">
                        Second group lights
                    </div>
                </div>
                <div class="box" id="outdoor-light-group-three">
                    <div class="box-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="box-content">
                        Gate lights
                    </div>
                </div>
            </div>

            <div class="page-left-content" id="outdoor-security-mode-left">
                <div class="box" id="outdoor-security-mode-button">
                    <div class="box-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="box-content">
                        Lights security mode
                    </div>
                </div>
            </div>

            <div class="page-left-content" id="outdoor-temperature-left">
                Temperature
            </div>

            <div class="page-left-content" id="outdoor-gate-left">
                <div class="box" id="outdoor-gate-button">
                    <div class="box-icon">
                        <i class="fas fa-dungeon"></i>
                    </div>
                    <div class="box-content">
                        Main gate
                    </div>
                </div>
            </div>

        </div>
        <div class="page-center">
            <div class="page-center-content">
                <div class="submenu">
                    <div class="submenu-content">
                        <div class="submenu-content-items">
                            <div class="submenu-content-item" id="outdoor-menu-light-groups">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="submenu-content-item" id="outdoor-menu-security-mode">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="submenu-content-item" id="outdoor-menu-temperature">
                                <i class="fas fa-thermometer-half"></i>
                            </div>
                            <div class="submenu-content-item" id="outdoor-menu-gate">
                                <i class="fas fa-dungeon"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-right">

            <div class="page-right-content" id="outdoor-lights-right">
                <h2 class="title">Information</h2>
                <h3 class="subtitle">Here you can find information about the system</h3>
                <span>Lights</span>
            </div>

            <div class="page-right-content" id="outdoor-security-mode-right">
                <h2 class="title">Information</h2>
                <h3 class="subtitle">Here you can find information about the system</h3>
                <span>Security mode</span>
            </div>

            <div class="page-right-content" id="outdoor-temperature-right">
                <h2 class="title">Information</h2>
                <h3 class="subtitle">Here you can find information about the system</h3>
                <span>Temperature</span>
            </div>

            <div class="page-right-content" id="outdoor-gate-right">
                <h2 class="title">Information</h2>
                <h3 class="subtitle">Here you can find information about the system</h3>
                <span>Gate</span>
            </div>

        </div>
    </div>

    <div class="page" id="item-one">
        The item-one page
    </div>

    <div class="page" id="item-two">
        The item-two page
    </div>

    <div class="page" id="item-three">
        The item-three page
    </div>

    <div class="page" id="administration">
        The administration page
    </div>

    <div class="menu">
        <div class="menu-items">
            <div class="menu-item is-active" id="outdoor-button">
                <div class="menu-item-content">
                    <div class="menu-item-content-icon">
                        <i class="fas fa-tree"></i>
                    </div>
                    <div class="menu-item-content-text">
                        Outdoor
                    </div>
                </div>
            </div>
            <div class="menu-item" id="item-one-button">
                <div class="menu-item-content">
                    <div class="menu-item-content-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div class="menu-item-content-text">
                        Item
                    </div>
                </div>
            </div>
            <div class="menu-item" id="item-two-button">
                <div class="menu-item-content">
                    <div class="menu-item-content-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div class="menu-item-content-text">
                        Item
                    </div>
                </div>
            </div>
            <div class="menu-item" id="item-three-button">
                <div class="menu-item-content">
                    <div class="menu-item-content-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div class="menu-item-content-text">
                        Item
                    </div>
                </div>
            </div>
            <div class="menu-item" id="administration-button">
                <div class="menu-item-content">
                    <div class="menu-item-content-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="menu-item-content-text">
                        Administration
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>

        const { ipcRenderer } = require("electron");

        window.$ = window.jQuery = require("jquery");

        $(() => {

            // When app is ready, the Outdoor page is displayed
            showOutdoorPage();
            showOutdoorLightsGroup();

            // On click Outdoor button in menu, the Outdoor page is displayed
            $("#outdoor-button").click(() => {
                showOutdoorPage();
                showOutdoorLightsGroup();
            });

            // On click Item One button in menu, the Item One page is displayed
            $("#item-one-button").click(() => {
                showItemOnePage();
            });

            // On click Item Two button in menu, the Item Two page is displayed
            $("#item-two-button").click(() => {
                showItemTwoPage();
            });

            // On click Item Three button in menu, the Item Three page is displayed
            $("#item-three-button").click(() => {
                showItemThreePage();
            });

            // On click Administration button in menu, the Administration page is displayed
            $("#administration-button").click(() => {
                showAdministrationPage();
            });

            // On click Outdoor Lights Group button, the Outdoor Lights Group section is displayed
            $("#outdoor-menu-light-groups").click(() => {
                showOutdoorLightsGroup();
            });

            // On click Outdoor Security Mode button, the Outdoor Security Mode section is displayed
            $("#outdoor-menu-security-mode").click(() => {
                showOutdoorSecurityMode();
            });

            // On click Outdoor Temperature button, the Outdoor Temperature section is displayed
            $("#outdoor-menu-temperature").click(() => {
                showOutdoorTemperature();
            });

            // On click Outdoor Gate button, the Outdoor Gate section is displayed
            $("#outdoor-menu-gate").click(() => {
                showOutdoorGate();
            });

            // Every 500 ms the state of sensors is updated
            setInterval(readSensorsState, 100);

            // Read the state from server
            ipcRenderer.on("sensors-state-updated", updateSensorsState);
        });

        // Shows the Outdoor page
        const showOutdoorPage = () => {
            $(".page").css("display", "none");
            $(".menu-item").removeClass("is-active");
            $("#outdoor").css("display", "grid");
            $("#outdoor-button").addClass("is-active");
        }

        // Shows the Item One page
        const showItemOnePage = () => {
            $(".page").css("display", "none");
            $(".menu-item").removeClass("is-active");
            $("#item-one").css("display", "grid");
            $("#item-one-button").addClass("is-active");
        }

        // Shows the Item Two page
        const showItemTwoPage = () => {
            $(".page").css("display", "none");
            $(".menu-item").removeClass("is-active");
            $("#item-two").css("display", "grid");
            $("#item-two-button").addClass("is-active");
        }

        // Shows the Item Three page
        const showItemThreePage = () => {
            $(".page").css("display", "none");
            $(".menu-item").removeClass("is-active");
            $("#item-three").css("display", "grid");
            $("#item-three-button").addClass("is-active");
        }

        // Shows the Administration page
        const showAdministrationPage = () => {
            $(".page").css("display", "none");
            $(".menu-item").removeClass("is-active");
            $("#administration").css("display", "grid");
            $("#administration-button").addClass("is-active");
        }

        // Shows the Outdoor Lights section
        const showOutdoorLightsGroup = () => {
            $(".page-left-content").css("display", "none");
            $(".page-right-content").css("display", "none");
            $("#outdoor-lights-left").css("display", "block");
            $("#outdoor-lights-right").css("display", "block");
            $(".submenu-content-item").removeClass("is-active");
            $("#outdoor-menu-light-groups").addClass("is-active");
        }

        // Shows the Outdoor Security Mode section
        const showOutdoorSecurityMode = () => {
            $(".page-left-content").css("display", "none");
            $(".page-right-content").css("display", "none");
            $("#outdoor-security-mode-left").css("display", "block");
            $("#outdoor-security-mode-right").css("display", "block");
            $(".submenu-content-item").removeClass("is-active");
            $("#outdoor-menu-security-mode").addClass("is-active");
        }

        // Shows the Outdoor Temperature section
        const showOutdoorTemperature = () => {
            $(".page-left-content").css("display", "none");
            $(".page-right-content").css("display", "none");
            $("#outdoor-temperature-left").css("display", "block");
            $("#outdoor-temperature-right").css("display", "block");
            $(".submenu-content-item").removeClass("is-active");
            $("#outdoor-menu-temperature").addClass("is-active");
        }

        // Shows the Outdoor Gate section
        const showOutdoorGate = () => {
            $(".page-left-content").css("display", "none");
            $(".page-right-content").css("display", "none");
            $("#outdoor-gate-left").css("display", "block");
            $("#outdoor-gate-right").css("display", "block");
            $(".submenu-content-item").removeClass("is-active");
            $("#outdoor-menu-gate").addClass("is-active");
        }

        // Ask to server to read sensors state
        const readSensorsState = () => {
            ipcRenderer.send("update-sensors-state")
        }

        // Starting from a given state the GUI is updated
        const updateSensorsState = (listener, state) => {

            // First of all it deactivate all sensors buttons
            $("#outdoor-light-group-one").removeClass("is-active");
            $("#outdoor-light-group-two").removeClass("is-active");
            $("#outdoor-light-group-three").removeClass("is-active");
            $("#outdoor-gate-button").removeClass("is-active");

            // Activate Light Group One button if state is "ON"
            if (state.lightGroupOne === "ON") {
                $("#outdoor-light-group-one").addClass("is-active");
            }

            // Activate Light Group One button if state is "ON"
            if (state.lightGroupTwo === "ON") {
                $("#outdoor-light-group-two").addClass("is-active");
            }

            // Activate Light Group Three button if state is "ON"
            if (state.lightGroupThree === "ON") {
                $("#outdoor-light-group-three").addClass("is-active");
            }

            // Activate Gate button if state is "ON"
            if (state.gate === "ON") {
                $("#outdoor-gate-button").addClass("is-active");
            }
        }

    </script>

</body>

</html>